<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Product - TiffinPacks Snack Kits</title>
  <meta name="description" content="View detailed product information for TiffinPacks Indian snack kits.">
  <link rel="stylesheet" href="styles.css">
</head>
<body>
  <!-- HEADER & NAVIGATION -->
  <header>
    <div class="header-content">
      <div class="logo">
        <span>üç±</span>
        <span>TiffinPacks</span>
      </div>
      
      <div class="header-right">
        <nav>
          <ul>
            <li><a href="index.html" data-i18n="home">Home</a></li>
            <li><a href="shop.html" data-i18n="shop">Shop</a></li>
            <li><a href="character-quiz.html" data-i18n="quiz">Character Quiz</a></li>
            <li><a href="about.html" data-i18n="about">About</a></li>
          </ul>
        </nav>
        
        <button class="language-toggle" onclick="toggleLanguage()">EN/HI</button>

        <a href="cart.html" class="cart-icon">
          üõí
          <span class="cart-count" style="display: none;">0</span>
        </a>
      </div>
    </div>
  </header>

  <!-- MAIN CONTENT -->
  <main>
    <div class="container" style="padding: var(--spacing-lg) 0;">
      <nav aria-label="Breadcrumb" style="margin-bottom: var(--spacing-lg);">
        <a href="shop.html" style="color: var(--text-light);">‚Üê Back to Shop</a>
      </nav>

      <!-- PRODUCT DETAIL SECTION -->
      <div id="product-detail" style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-xl); margin-bottom: var(--spacing-xl);">
        <!-- Left: Image & Trust Message -->
        <div>
          <div id="product-image" style="
            font-size: 8rem;
            text-align: center;
            padding: var(--spacing-xl);
            background-color: var(--bg-light);
            border-radius: var(--radius-lg);
            margin-bottom: var(--spacing-lg);
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
          "></div>

          <div class="trust-note" id="trust-note">
            <!-- Trust note loaded by JS -->
          </div>
        </div>

        <!-- Right: Product Info -->
        <div>
          <h1 id="product-name" style="margin-bottom: var(--spacing-sm);"></h1>
          
          <div style="margin-bottom: var(--spacing-lg);">
            <div id="product-badges" style="margin-bottom: var(--spacing-sm);"></div>
            <p id="product-description" style="color: var(--text-light); font-size: 1.1rem; line-height: 1.6;"></p>
          </div>

          <!-- PRICE & PORTION -->
          <div style="background-color: var(--bg-light); padding: var(--spacing-md); border-radius: var(--radius-md); margin-bottom: var(--spacing-lg);">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-md);">
              <div>
                <p style="color: var(--text-light); font-size: 0.9rem; margin-bottom: var(--spacing-xs);">Price</p>
                <p id="product-price" style="font-size: 2rem; font-weight: 700; color: var(--primary);"></p>
              </div>
              <div>
                <p style="color: var(--text-light); font-size: 0.9rem; margin-bottom: var(--spacing-xs);">Portion Size</p>
                <p id="product-portion" style="font-size: 1.25rem; font-weight: 600;"></p>
              </div>
            </div>
          </div>

          <!-- NUTRITION HIGHLIGHTS -->
          <div style="margin-bottom: var(--spacing-lg);">
            <h3 style="margin-bottom: var(--spacing-sm);">Nutrition Highlights</h3>
            <p id="product-nutrition" style="background: #fff3cd; padding: var(--spacing-md); border-radius: var(--radius-md); border-left: 4px solid var(--accent);"></p>
          </div>

          <!-- QUANTITY SELECTOR & ADD TO CART -->
          <div style="margin-bottom: var(--spacing-lg);">
            <label for="quantity" style="display: block; margin-bottom: var(--spacing-sm); font-weight: 600;">
              Quantity
            </label>
            <div style="display: flex; gap: var(--spacing-sm); align-items: center; margin-bottom: var(--spacing-md);">
              <button class="btn btn-small" onclick="decreaseQuantity()">‚àí</button>
              <input 
                type="number" 
                id="quantity" 
                value="1" 
                min="1" 
                max="10"
                style="width: 80px; text-align: center;"
                aria-label="Product quantity"
              >
              <button class="btn btn-small" onclick="increaseQuantity()">+</button>
            </div>
            <button 
              class="btn btn-primary btn-block" 
              id="add-to-cart-btn"
              onclick="addToCartFromProduct()"
              style="padding: var(--spacing-md);"
            >
              Add to Cart
            </button>
          </div>
        </div>
      </div>

      <!-- PRODUCT DETAILS TABS -->
      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: var(--spacing-xl); margin-bottom: var(--spacing-xl);">
        
        <!-- INGREDIENTS & ALLERGENS -->
        <div class="card">
          <h3 style="margin-bottom: var(--spacing-md);">Ingredients</h3>
          <ul id="ingredients-list" style="list-style: none; margin-bottom: var(--spacing-lg);">
            <!-- Loaded by JS -->
          </ul>

          <h3 style="margin-bottom: var(--spacing-md); margin-top: var(--spacing-lg);">Allergen Info</h3>
          <div id="allergen-info" style="
            background: #f8d7da;
            color: #721c24;
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            border-left: 4px solid var(--warning);
          ">
            <!-- Loaded by JS -->
          </div>
        </div>

        <!-- NUTRITION INFO -->
        <div class="card">
          <h3 style="margin-bottom: var(--spacing-md);">Why This Is Healthy</h3>
          <div id="product-trustnote-detailed" style="
            background: #d1ecf1;
            color: #0c5460;
            padding: var(--spacing-md);
            border-radius: var(--radius-md);
            border-left: 4px solid var(--secondary);
            line-height: 1.8;
          "></div>
        </div>
      </div>

      <!-- FAQ ACCORDION -->
      <div class="card">
        <h2 style="margin-bottom: var(--spacing-lg);">Parents Ask Us...</h2>
        
        <div class="accordion">
          <div class="accordion-item">
            <button class="accordion-header" aria-expanded="false">
              <span>Is this snack really nutritious?</span>
              <span class="accordion-icon">‚Üí</span>
            </button>
            <div class="accordion-content">
              <p>Absolutely. All TiffinPacks are made with whole grains, legumes, and seeds‚Äîfoods that have nourished Indian families for generations. We include nutrition facts and highlight key benefits (protein, fiber, vitamins) on every pack. No artificial colors, flavors, or preservatives. Just ingredients you'd use at home.</p>
            </div>
          </div>

          <div class="accordion-item">
            <button class="accordion-header" aria-expanded="false">
              <span>How affordable are they really?</span>
              <span class="accordion-icon">‚Üí</span>
            </button>
            <div class="accordion-content">
              <p>Under $5 per pack. We focus on efficiency, not fancy packaging. By skipping marketing hype and working directly with ingredient suppliers, we keep costs low for families with tight budgets. For bulk school and NGO orders, we offer further discounts.</p>
            </div>
          </div>

          <div class="accordion-item">
            <button class="accordion-header" aria-expanded="false">
              <span>Do you have vegetarian and halal options?</span>
              <span class="accordion-icon">‚Üí</span>
            </button>
            <div class="accordion-content">
              <p>Yes. Each product is clearly labeled. Our vegetarian packs use plant-based proteins (legumes, seeds, nuts). Halal options are certified and made with respect to Islamic dietary laws. We believe food inclusivity is about respecting everyone's values, not just taste buds.</p>
            </div>
          </div>

          <div class="accordion-item">
            <button class="accordion-header" aria-expanded="false">
              <span>Are these safe for kids?</span>
              <span class="accordion-icon">‚Üí</span>
            </button>
            <div class="accordion-content">
              <p>Yes. We follow strict food safety standards. All ingredients are sourced from certified suppliers. Allergen information is listed clearly on every pack. We recommend checking allergens if your child has specific sensitivities (e.g., tree nuts). Always supervise children during snacking.</p>
            </div>
          </div>
        </div>
      </div>

      <!-- RELATED PRODUCTS -->
      <div style="margin-top: var(--spacing-xl);">
        <h2 style="margin-bottom: var(--spacing-lg);">Other Packs You Might Like</h2>
        <div class="grid grid-3" id="related-products">
          <!-- Loaded by JS -->
        </div>
      </div>
    </div>
  </main>

  <!-- FOOTER -->
  <footer>
    <div class="container">
      <div class="footer-content">
        <div class="footer-section">
          <h4>TiffinPacks</h4>
          <p>Affordable, nutritious, culturally inclusive Indian snack kits for kids.</p>
          <p style="font-size: 0.9rem; margin-top: 1rem;">üç± 2026 | Made with care for families.</p>
        </div>

        <div class="footer-section">
          <h4>Shop</h4>
          <ul>
            <li><a href="shop.html">All Packs</a></li>
            <li><a href="shop.html">Vegetarian</a></li>
            <li><a href="shop.html">Halal</a></li>
          </ul>
        </div>

        <div class="footer-section">
          <h4>Company</h4>
          <ul>
            <li><a href="index.html">Home</a></li>
            <li><a href="about.html">About Us</a></li>
            <li><a href="about.html">Our Mission</a></li>
          </ul>
        </div>

        <div class="footer-section">
          <h4>Support</h4>
          <ul>
            <li><a href="#contact">Contact Us</a></li>
            <li><a href="#faq">FAQ</a></li>
            <li><a href="#">Privacy Policy</a></li>
          </ul>
        </div>
      </div>

      <div class="footer-bottom">
        <p>&copy; 2026 TiffinPacks. All rights reserved.</p>
      </div>
    </div>
  </footer>

  <script src="language.js"></script>
  <script src="data.js"></script>
  <script src="app.js"></script>
  <script>
    function toggleLanguage() {
      const newLang = currentLanguage === 'en' ? 'hi' : 'en';
      setLanguage(newLang);
      updateLanguageButton();
    }
    
    function updateLanguageButton() {
      const btn = document.querySelector('.language-toggle');
      btn.textContent = currentLanguage === 'en' ? 'EN/HI' : 'HI/EN';
    }
    
    document.addEventListener('DOMContentLoaded', () => {
      updateLanguageButton();
    });
    
    /**
     * Product Detail Page: Load and display product by ID from URL
     */

    /**
     * Get current product
     */
    function getCurrentProduct() {
      const productId = getProductIdFromURL();
      return getProductById(productId);
    }

    /**
     * Increase quantity
     */
    function increaseQuantity() {
      const input = document.getElementById('quantity');
      input.value = Math.min(10, parseInt(input.value) + 1);
    }

    /**
     * Decrease quantity
     */
    function decreaseQuantity() {
      const input = document.getElementById('quantity');
      input.value = Math.max(1, parseInt(input.value) - 1);
    }

    /**
     * Add to cart from product detail page
     */
    function addToCartFromProduct() {
      const product = getCurrentProduct();
      const quantity = parseInt(document.getElementById('quantity').value);
      
      if (product) {
        addToCart(product, quantity);
        // Reset quantity after adding
        document.getElementById('quantity').value = 1;
      }
    }

    /**
     * Load and render product details
     */
    function loadProductDetail() {
      const product = getCurrentProduct();

      if (!product) {
        document.getElementById('product-detail').innerHTML = `
          <div style="grid-column: 1/-1;">
            <div class="alert alert-error">
              Product not found. <a href="shop.html">Back to shop</a>
            </div>
          </div>
        `;
        return;
      }

      // Load product image
      const productImage = document.getElementById('product-image');
      if (typeof product.image === 'string' && /\.(png|jpe?g|webp|gif)$/i.test(product.image)) {
        productImage.innerHTML = `<img src="${product.image}" alt="${product.name}">`;
      } else {
        productImage.textContent = product.image;
      }

      // Load basic info
      document.getElementById('product-name').textContent = product.name;
      document.getElementById('product-price').textContent = '$' + product.price.toFixed(2);
      document.getElementById('product-portion').textContent = product.portion;
      document.getElementById('product-description').textContent = product.description;
      document.getElementById('product-nutrition').textContent = product.nutrition;

      // Load dietary badges
      const badges = product.dietary
        .map(d => `<span class="badge badge-${d}">${d.toUpperCase()}</span>`)
        .join('');
      document.getElementById('product-badges').innerHTML = badges;

      // Load ingredients
      const ingredientsList = product.ingredients
        .map(ing => `<li style="padding: var(--spacing-xs) 0; border-bottom: 1px solid var(--border);">‚úì ${ing}</li>`)
        .join('');
      document.getElementById('ingredients-list').innerHTML = ingredientsList;

      // Load allergen info
      const allergenText = product.allergens.length > 0
        ? product.allergens.join(', ')
        : 'No major known allergens';
      document.getElementById('allergen-info').textContent = allergenText;

      // Load trust note
      document.getElementById('product-trustnote-detailed').innerHTML = `
        <strong>Why This Is Healthy:</strong><br><br>
        ${product.trustNote}
      `;
      
      document.getElementById('trust-note').textContent = product.trustNote;

      // Load related products (other products excluding current)
      const related = products
        .filter(p => p.id !== product.id)
        .slice(0, 3);
      renderProductGrid(related, 'related-products');
    }

    /**
     * Initialize on page load
     */
    document.addEventListener('DOMContentLoaded', () => {
      loadProductDetail();
    });
  </script>
</body>
</html>
